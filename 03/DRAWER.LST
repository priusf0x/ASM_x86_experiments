Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 1
drawer.asm



      1	0000			     .model tiny
      2	0000			     .code
      3				     .286
      4				     org 100h
      5				     locals @@
      6
      7				     include macros.asm
1     8				     ; ======================= MACROS ==========================
1     9
1    10				     __exit__	 macro
1    11						     mov ah, 4ch
1    12						     int 21h
1    13						 endm
     14
     15				     ; ====================== ATRIBUTES	========================
     16
     17	      =0001		     FG_BLUE	     equ 00000001b
     18	      =0002		     FG_GREEN	     equ 00000010b
     19	      =0004		     FG_RED	     equ 00000100b
     20	      =0008		     FG_BRIGHT	     equ 00001000b
     21
     22	      =000F		     FG_WHITE	     equ FG_BLUE xor FG_GREEN xor FG_RED xor FG_BRIGHT
     23
     24	      =0010		     BG_BLUE	     equ 00010000b
     25	      =0020		     BG_GREEN	     equ 00100000b
     26	      =0040		     BG_RED	     equ 01000000b
     27	      =0080		     BG_BLINK	     equ 10000000b
     28
     29	      =0070		     BG_WHITE	     equ BG_BLUE xor BG_GREEN xor BG_RED
     30
     31				     ; ======================= HELPERS =========================
     32
     33	      =B800		     VRAM_LOCATION   equ 0B800h
     34	      =0028		     CENTER_X	     equ 40
     35	      =000D		     CENTER_Y	     equ 13
     36	      =0023		     SEPARATOR	     equ '#'
     37	      =00A0		     NEW_LINE_OFFSET equ 160
     38	      =0081		     BUFFER	     equ 81h
     39	      =0080		     BUFFER_LENGTH   equ 80h
     40
     41	*100			     rect_style	     struc
     42	*000  01*(??)					     global_filling    db ?
     43	*001  01*(??)					     global_style      db ?
     44	*002  01*(??)					     global_atribute   db ?
     45	*003					     ends
     46
     47	*100			     rect_filling    struc
     48	*000  01*(??)					     filling_ul	db ?
     49	*001  01*(??)					     filling_u	db ?
     50	*002  01*(??)					     filling_ur	db ?
     51	*003  01*(??)					     filling_ml	db ?
     52	*004  01*(??)					     filling_m	db ?
     53	*005  01*(??)					     filling_mr	db ?
     54	*006  01*(??)					     filling_dl	db ?
     55	*007  01*(??)					     filling_d	db ?
     56	*008  01*(??)					     filling_dr	db ?
     57	*009					     ends
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 2
drawer.asm



     58
     59				     ; =========================================================
     60
     61	0100			     __start__:
     62
     63	0100  E8 0004				     call main
     64
     65						     __exit__
1    66	0103  B4 4C				     mov ah, 4ch
1    67	0105  CD 21				     int 21h
     68
     69	0107			     .data
     70	0000  70 40 70		     FRAME_STYLE     rect_style	<BG_WHITE, BG_RED, BG_WHITE>
     71	0003  06 05 06 05 20 05	06+  FILLING	     rect_filling <6,5,6,5,32,5,6,5,6>
     72	      05 06
     73	000C			     STYLES:
     74	000C  70 40 70		     DREC_CLASSIC    rect_style	<BG_WHITE, BG_RED, BG_WHITE>
     75	000F  10 70 10		     OLD_SCHOOL	     rect_style	<BG_BLUE, BG_WHITE, BG_BLUE>
     76	0012  00 70 00		     GITHUB	     rect_style	<      0, BG_WHITE, 0>
     77	0015			     FILLINGS:
     78	0015  06 05 06 06 20 06	06+  DREC_FILLING    rect_filling <06, 05h, 06h	, 06h, 20h,\
     79	      05 06						   06h,	06h, 05h, 06h>
     80	001E  B8 7C 20 7C 5C 2D	2F+  CLASSIC_FILLING rect_filling <"/".	"-". "\", "|", 20h,\
     81	      02*(??)						   "|",	"\", "-", "/">
     82
     83				     ; ======================= FUNCTIONS ========================
     84
     85	0027			     .code
     86
     87				     ; ========================= MAIN ==========================
     88
     89	0107			     main:
     90
     91	0107  8A 0E 0080			     mov cl, ds:[BUFFER_LENGTH]
     92	010B  BF 0081				     mov di, BUFFER
     93	010E  E8 003B				     call set_style
     94
     95	0111  57				     push di
     96	0112  51				     push cx
     97
     98	0113  E8 0155				     call get_size
     99
    100	0116  51				     push cx
    101	0117  E8 018D				     call calculate_left_up_corner
    102	011A  59				     pop cx
    103
    104	011B  53				     push bx
    105	011C  E8 00D6				     call draw_frame
    106
    107	011F  5F				     pop di
    108	0120  59				     pop cx
    109	0121  5E				     pop si
    110	0122  E8 008E				     call write_text_centered
    111
    112	0125  C3				     ret
    113
    114				     ; ==================== STRING FUNCTION ====================
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 3
drawer.asm



    115
    116				     ; _________________________________________________________
    117				     ; Setting frame filling
    118				     ;
    119				     ; args:
    120				     ;	     es:di - input string
    121				     ;
    122				     ; delete:
    123				     ;	     al
    124				     ; _________________________________________________________
    125
    126	0126			     set_filling:
    127
    128	0126  E8 0049				     call skip_spaces
    129
    130	0129  26: 8A 05				     mov al, es:[di]
    131	012C  47				     inc di
    132	012D  49				     dec cx
    133	012E  2D 0030				     sub ax, "0"
    134
    135
    136	0131  8B D8				     mov bx, ax
    137	0133  C1 E3 03				     shl bx, 3
    138	0136  03 D8				     add bx, ax		; multiplication on 8
    139
    140
    141	0138  A2 0000r				     mov FRAME_STYLE.global_filling, al
    142	013B  43				     inc bx
    143
    144	013C  8A 87 000Cr			     mov al, [offset STYLES + bx]
    145	0140  A2 0001r				     mov FRAME_STYLE.global_style, al
    146	0143  43				     inc bx
    147
    148	0144  8A 87 000Cr			     mov al, [offset STYLES + bx]
    149	0148  A2 0002r				     mov FRAME_STYLE.global_atribute, al
    150
    151	014B  C3				     ret
    152
    153				     ; _________________________________________________________
    154
    155				     ; _________________________________________________________
    156				     ; Setting frame style
    157				     ;
    158				     ; args:
    159				     ;	     es:di - input string
    160				     ;	     cx	   - string length
    161				     ;
    162				     ; returns:
    163				     ;	     es:di - ptr to skipped arg
    164				     ;	     cx	   - length es:di
    165				     ; delete:
    166				     ;	     ax, bx, si, es
    167				     ; _________________________________________________________
    168
    169	014C			     set_style:
    170
    171	014C  E8 0023				     call skip_spaces
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 4
drawer.asm



    172	014F  E8 0020				     call skip_spaces
    173
    174	0152  26: 8A 05				     mov al, es:[di]
    175	0155  47				     inc di
    176	0156  49				     dec cx
    177	0157  2D 0030				     sub ax, "0"
    178
    179	015A  8B D8				     mov bx, ax
    180	015C  D1 E3				     shl bx, 1
    181	015E  03 D8				     add bx, ax
    182
    183	0160  57				     push di
    184	0161  51				     push cx
    185										  ; preparing for copiing
    186
    187	0162  BE 000Cr				     mov si, offset STYLES
    188	0165  03 F3				     add si, bx
    189
    190	0167  B9 0003				     mov cx, 3
    191
    192	016A  BF 0000r				     mov di, offset FRAME_STYLE
    193
    194	016D  F3> A4				     rep movsb
    195
    196	016F  59				     pop cx
    197	0170  5F				     pop di
    198
    199	0171  C3				     ret
    200
    201				     ; _________________________________________________________
    202
    203				     ; _________________________________________________________
    204				     ; Skip Spaces until not space symbol
    205				     ;
    206				     ; args:
    207				     ;	     es:di - input string
    208				     ;	     cx	   - string length
    209				     ;
    210				     ; return:
    211				     ;	     di	- skipped until	separator
    212				     ;	     ci	- si string length
    213				     ; delete:
    214				     ;	     al
    215				     ; _________________________________________________________
    216
    217	0172			     skip_spaces:
    218
    219	0172  FC				     cld
    220	0173  B0 20				     mov al, 20h
    221
    222	0175  F3> AE				     repe scasb
    223	0177  41				     inc cx
    224	0178  4F				     dec di
    225
    226	0179  C3				     ret
    227
    228				     ; _________________________________________________________
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 5
drawer.asm



    229
    230				     ; _________________________________________________________
    231				     ; Returns length of rhe ds:si string with separator
    232				     ;	     symbol
    233				     ; args:
    234				     ;	     es:di - input string
    235				     ;	     cx	   - string length
    236				     ; return:
    237				     ;	     bx	- string length
    238				     ;	     di	- skipped until	separator or EOL
    239				     ;	     cx	- length of new	si string
    240				     ; delete
    241				     ;	     ax
    242				     ; _________________________________________________________
    243
    244	017A			     strlen:
    245
    246	017A  8B D9				     mov bx, cx
    247	017C  85 C9				     test cx, cx
    248	017E  74 0B				     jz	@@skip
    249
    250	0180  33 C0				     xor ax, ax
    251
    252	0182  FC				     cld
    253
    254	0183  B0 23				     mov al, separator
    255	0185  F2> AE				     repne scasb
    256
    257	0187  75 02				     jne @@skip
    258	0189  41				     inc cx
    259	018A  4F				     dec di
    260
    261	018B			     @@skip:
    262	018B  2B D9				     sub bx, cx
    263	018D			     @@leave:
    264	018D  C3				     ret
    265
    266				     ; _________________________________________________________
    267
    268				     ; _________________________________________________________
    269				     ; Count amount of al(ASCII) symbols in string es:al
    270				     ;
    271				     ; args:
    272				     ;	     al	   - symbol
    273				     ;	     es:di - input string
    274				     ;	     cx	   - string length
    275				     ;
    276				     ; return:
    277				     ;	     dx	- symbol amount
    278				     ;
    279				     ; delete
    280				     ;	     cx, si
    281				     ; _________________________________________________________
    282
    283	018E			     count_al_symbols_in_string:
    284
    285	018E  33 D2				     xor dx, dx
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 6
drawer.asm



    286	0190  FC				     cld
    287
    288	0191			     @@continue:
    289
    290	0191  F2> AE				     repne scasb
    291	0193  74 01				     je	@@increment
    292
    293	0195  C3				     ret
    294
    295	0196			     @@increment:
    296	0196  42				     inc dx
    297	0197  EB F8				     jmp @@continue
    298
    299				     ; _________________________________________________________
    300
    301				     ; _________________________________________________________
    302				     ; Write ds:si line	with ah:al indent with offset es:si
    303				     ;
    304				     ; args:
    305				     ;	     cx	   - printable string length
    306				     ;	     es:di - offset
    307				     ;	     ds:si - source
    308				     ; returns:
    309				     ;	     si	- the next symbol after	last written
    310				     ;
    311				     ; delete:
    312				     ;	     di, cx
    313				     ; _________________________________________________________
    314
    315	0199			     write_line:
    316
    317	0199  85 C9				     test cx, cx
    318	019B  74 09				     jz	@@leave
    319
    320	019D  FC				     cld
    321	019E  8A 26 0002r			     mov ah, FRAME_STYLE.global_atribute
    322
    323	01A2  AC		     @@scope:	     lodsb
    324	01A3  AB				     stosw
    325	01A4  E2 FC				     loop @@scope
    326	01A6			     @@leave:
    327
    328	01A6  C3				     ret
    329
    330				     ; _________________________________________________________
    331				     ; Write string with centering
    332				     ;
    333				     ; args:
    334				     ;	     cx	   - string length
    335				     ;	     es:di - start_line	offset
    336				     ;	     ds:si - source
    337				     ;
    338				     ; delete:
    339				     ;	     di, cx, bx, si
    340				     ; _________________________________________________________
    341
    342	01A7			     write_string_centered:
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 7
drawer.asm



    343
    344	01A7  83 C7 50				     add di, CENTER_X *	2
    345	01AA  2B F9				     sub di, cx
    346
    347	01AC  83 E7 FE				     and di, 0FFFFh - 1
    348
    349	01AF  E8 FFE7				     call write_line
    350
    351	01B2  C3				     ret
    352				     ; _________________________________________________________
    353
    354				     ; _________________________________________________________
    355				     ; Write text with centering
    356				     ;
    357				     ; args:
    358				     ;	     cx	   - string length
    359				     ;	     es:di - start_line	offset
    360				     ;	     ds:si - source
    361				     ;
    362				     ; delete:
    363				     ;	     ax, bx, cx, dx, di, si
    364				     ; _________________________________________________________
    365
    366	01B3			     write_text_centered:
    367
    368	01B3			     @@scope:
    369
    370	01B3  51				     push cx
    371	01B4  57				     push di
    372	01B5  06				     push es
    373
    374	01B6  8C D8				     mov ax, ds
    375	01B8  8E C0				     mov es, ax
    376	01BA  8B FE				     mov di, si
    377
    378	01BC  E8 FFBB				     call strlen
    379
    380	01BF  07				     pop es
    381	01C0  5F				     pop di
    382	01C1  59				     pop cx
    383
    384	01C2  2B CB				     sub cx, bx
    385
    386	01C4  51				     push cx
    387	01C5  57				     push di
    388
    389	01C6  8B CB				     mov cx, bx
    390	01C8  E8 FFDC				     call write_string_centered
    391
    392	01CB  5F				     pop di
    393	01CC  59				     pop cx
    394
    395	01CD  81 C7 00A0			     add di, NEW_LINE_OFFSET
    396
    397	01D1  85 C9				     test cx, cx
    398	01D3  75 01				     jnz @@decrease
    399
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 8
drawer.asm



    400	01D5  C3				     ret
    401
    402	01D6			     @@decrease:
    403	01D6  46				     inc si
    404	01D7  49				     dec cx
    405	01D8  EB D9				     jmp @@scope
    406
    407				     ; _________________________________________________________
    408
    409				     ; ==================== DRAW_FUNCTION ======================
    410
    411				     ; _________________________________________________________
    412				     ; Draws horizontal	line with length of cx on es:di	offset
    413				     ;
    414				     ; args:
    415				     ;	     ah	   - atribute
    416				     ;	     al	   - ASCII character
    417				     ;	     cx	   - string length
    418				     ;	     es:di - start point offset
    419				     ;
    420				     ; returns:
    421				     ;	     di	- new cursor position
    422				     ;
    423				     ; delete:
    424				     ;	     cx
    425				     ; _________________________________________________________
    426
    427	01DA			     draw_horizontal:
    428
    429	01DA  F3> AB				     rep stosw
    430
    431	01DC  C3				     ret
    432
    433				     ; _________________________________________________________
    434				     ; Draws horizontal	line() with length of cx on es:di offset
    435				     ;
    436				     ; args:
    437				     ;1st symbol:    ah	   - atribute
    438				     ;		     al	   - ASCII character
    439				     ;2st symbol:    bh	   - atribute
    440				     ;		     bl	   - ASCII character
    441				     ;3st symbol:    dh	   - atribute
    442				     ;		     dl	   - ASCII character
    443				     ;
    444				     ;		     cx	   - string length
    445				     ;		     es:di - start point offset
    446				     ;
    447				     ; delete:
    448				     ;	     di
    449				     ; _________________________________________________________
    450
    451	01DD			     draw_frame_line:
    452
    453	01DD  50				     push ax
    454	01DE  51				     push cx
    455	01DF  B9 0001				     mov cx, 1
    456	01E2  E8 FFF5				     call draw_horizontal
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 9
drawer.asm



    457
    458	01E5  59				     pop cx
    459	01E6  8B C3				     mov ax, bx
    460	01E8  E8 FFEF				     call draw_horizontal
    461
    462	01EB  B9 0001				     mov cx, 1
    463	01EE  8B C2				     mov ax, dx
    464	01F0  E8 FFE7				     call draw_horizontal
    465
    466	01F3  58				     pop ax
    467
    468	01F4  C3				     ret
    469				     ; _________________________________________________________
    470
    471				     ; _________________________________________________________
    472				     ; Draws a frame
    473				     ;
    474				     ; args:
    475				     ;		     ch	- height
    476				     ;		     cl	- length
    477				     ;		     es:di - start point offset
    478				     ;
    479				     ; delete:
    480				     ;	     ax, bx, cx, dx, di, si
    481				     ; _________________________________________________________
    482
    483	01F5			     draw_frame:
    484
    485				     ;;;;;;;;;;;;;;;;;;;;;;;; saving cx	;;;;;;;;;;;;;;;;;;;;;;;;
    486
    487	01F5  8B F1				     mov si, cx
    488
    489				     ;;;;;;;;;;;;;;;;;;; drawing upper part ;;;;;;;;;;;;;;;;;;;;
    490
    491	01F7  8A 26 0001r			     mov ah, FRAME_STYLE.global_style
    492	01FB  8A 3E 0001r			     mov bh, FRAME_STYLE.global_style
    493	01FF  8A 36 0001r			     mov dh, FRAME_STYLE.global_style
    494
    495	0203  A0 0003r				     mov al, FILLING.filling_ul
    496	0206  8A 1E 0004r			     mov bl, FILLING.filling_u
    497	020A  8A 16 0005r			     mov dl, FILLING.filling_ur
    498
    499	020E  57				     push di
    500
    501	020F  32 ED				     xor ch, ch
    502	0211  E8 FFC9				     call draw_frame_line
    503
    504	0214  5F				     pop di
    505	0215  81 C7 00A0			     add di, NEW_LINE_OFFSET
    506
    507				     ;;;;;;;;;;;;;;;;;;; drawing middle	part ;;;;;;;;;;;;;;;;;;;;
    508
    509	0219  8B CE				     mov cx, si
    510
    511	021B  8A 26 0001r			     mov ah, FRAME_STYLE.global_style
    512	021F  8A 3E 0000r			     mov bh, FRAME_STYLE.global_filling
    513	0223  8A 36 0001r			     mov dh, FRAME_STYLE.global_style
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 10
drawer.asm



    514
    515	0227  A0 0006r				     mov al, FILLING.filling_ml
    516	022A  8A 1E 0007r			     mov bl, FILLING.filling_m
    517	022E  8A 16 0008r			     mov dl, FILLING.filling_mr
    518
    519	0232  EB 2F 90				     jmp @@test
    520	0235			     @@scope:
    521
    522	0235  FE CD				     dec ch
    523	0237  8B F1				     mov si, cx
    524
    525	0239  32 ED				     xor ch, ch
    526	023B  57				     push di
    527	023C  E8 FF9E				     call draw_frame_line
    528	023F  5F				     pop di
    529	0240  81 C7 00A0			     add di, NEW_LINE_OFFSET
    530
    531	0244  75 1D				     jnz @@test
    532
    533	0246			     @@skip:
    534
    535				     ;;;;;;;;;;;;;;;;;;	drawing	lower part ;;;;;;;;;;;;;;;;;;;;;
    536
    537	0246  8A 26 0001r			     mov ah, FRAME_STYLE.global_style
    538	024A  8A 3E 0001r			     mov bh, FRAME_STYLE.global_style
    539	024E  8A 36 0001r			     mov dh, FRAME_STYLE.global_style
    540
    541	0252  A0 0009r				     mov al, FILLING.filling_dl
    542	0255  8A 1E 000Ar			     mov bl, FILLING.filling_d
    543	0259  8A 16 000Br			     mov dl, FILLING.filling_dr
    544
    545	025D  8B CE				     mov cx, si
    546
    547	025F  E8 FF7B				     call draw_frame_line
    548
    549	0262  C3				     ret
    550
    551	0263			     @@test:
    552	0263  8B CE				     mov cx, si
    553	0265  84 ED				     test ch, ch
    554	0267  75 CC				     jnz @@scope
    555	0269  EB DB				     jmp @@skip
    556
    557				     ; _________________________________________________________
    558
    559				     ; _________________________________________________________
    560				     ; Get frame optimal size considered to string content
    561				     ;
    562				     ; args:
    563				     ;	     cx	   - string length
    564				     ;	     es:di - text
    565				     ;
    566				     ; returns:
    567				     ;	     ch	- frame	height
    568				     ;	     cl	- frame	length
    569				     ;
    570				     ; delete:
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 11
drawer.asm



    571				     ;	     ?all?
    572				     ; _________________________________________________________
    573
    574	026B			     get_size:
    575
    576	026B  51				     push cx
    577	026C  57				     push di
    578
    579	026D  B0 23				     mov al, SEPARATOR
    580	026F  E8 FF1C				     call count_al_symbols_in_string
    581	0272  8B CA				     mov cx, dx
    582	0274  41				     inc cx
    583	0275  C1 E1 08				     shl cx, 8
    584
    585	0278  5F				     pop di
    586	0279  58				     pop ax
    587	027A  51				     push cx
    588
    589	027B  8B C8				     mov cx, ax
    590
    591	027D			     @@scope:
    592
    593	027D  51				     push cx
    594	027E  E8 FEF9				     call strlen
    595	0281  59				     pop cx
    596
    597	0282  2B CB				     sub cx, bx
    598
    599	0284  3B DA				     cmp bx, dx
    600	0286  77 0E				     ja	@@new_lenght
    601	0288			     @@continue:
    602
    603	0288  85 C9				     test cx, cx
    604	028A  75 06				     jnz @@decrease
    605
    606	028C  59				     pop cx
    607	028D  8A CA				     mov cl, dl
    608	028F  FE C1				     inc cl
    609
    610	0291  C3				     ret
    611
    612	0292			     @@decrease:
    613	0292  47				     inc di
    614	0293  49				     dec cx
    615	0294  EB E7				     jmp @@scope
    616
    617	0296			     @@new_lenght:
    618	0296  8B D3				     mov dx, bx
    619	0298  EB EE				     jmp @@continue
    620
    621				     ; _________________________________________________________
    622
    623				     ; _________________________________________________________
    624				     ; Translates bx into string offset
    625				     ;
    626				     ; args:
    627				     ;	     di	- string number
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 12
drawer.asm



    628				     ;
    629				     ; return:
    630				     ;	     di	- new offset
    631				     ; del
    632				     ;	     bx
    633				     ; _________________________________________________________
    634
    635	029A			     translate_string:
    636
    637	029A  8B DF				     mov bx, di
    638	029C  C1 E7 03				     shl di, 3
    639	029F  D1 E3				     shl bx, 1
    640	02A1  03 FB				     add di, bx
    641	02A3  C1 E7 04				     shl di, 4
    642
    643	02A6  C3				     ret
    644
    645				     ; _________________________________________________________
    646
    647				     ; _________________________________________________________
    648				     ; Count left corner coordinate
    649				     ;
    650				     ; args:
    651				     ;	     ch	- frame	height
    652				     ;	     cl	- frame	length
    653				     ;
    654				     ; returns:
    655				     ;	     es	- vram sector
    656				     ;	     di	- left corner offset
    657				     ;	     bx	- start	string
    658				     ;
    659				     ; _________________________________________________________
    660
    661	02A7			     calculate_left_up_corner:
    662
    663	02A7  BB B800				     mov bx, VRAM_LOCATION
    664	02AA  8E C3				     mov es, bx
    665
    666	02AC  D0 ED				     shr ch, 1
    667	02AE  D0 E9				     shr cl, 1
    668	02B0  81 C1 0101			     add cx, 0101h
    669
    670	02B4  BB 000D				     mov bx, CENTER_Y
    671	02B7  2A DD				     sub bl, ch
    672	02B9  8B FB				     mov di, bx
    673
    674	02BB  E8 FFDC				     call translate_string
    675	02BE  8B DF				     mov bx, di
    676	02C0  81 C3 00A0			     add bx, NEW_LINE_OFFSET
    677	02C4  53				     push bx
    678
    679	02C5  BB 0028				     mov bx, CENTER_X
    680	02C8  2A D9				     sub bl, cl
    681	02CA  D1 E3				     shl bx, 1
    682
    683	02CC  03 FB				     add di, bx
    684
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 13
drawer.asm



    685	02CE  5B				     pop bx
    686
    687	02CF  C3				     ret
    688
    689				     ; _________________________________________________________
    690
    691				     end __start__
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 14
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/15/26"
??FILENAME			  Text	 "drawer  "
??TIME				  Text	 "02:50:06"
??VERSION			  Number 040A
@32BIT				  Text	 0
@@CONTINUE			  Near	 DGROUP:0191
@@CONTINUE			  Near	 DGROUP:0288
@@DECREASE			  Near	 DGROUP:01D6
@@DECREASE			  Near	 DGROUP:0292
@@INCREMENT			  Near	 DGROUP:0196
@@LEAVE				  Near	 DGROUP:018D
@@LEAVE				  Near	 DGROUP:01A6
@@NEW_LENGHT			  Near	 DGROUP:0296
@@SCOPE				  Near	 DGROUP:01A2
@@SCOPE				  Near	 DGROUP:01B3
@@SCOPE				  Near	 DGROUP:0235
@@SCOPE				  Near	 DGROUP:027D
@@SKIP				  Near	 DGROUP:018B
@@SKIP				  Near	 DGROUP:0246
@@TEST				  Near	 DGROUP:0263
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0707H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 DRAWER
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
BG_BLINK			  Number 0080
BG_BLUE				  Number 0010
BG_GREEN			  Number 0020
BG_RED				  Number 0040
BG_WHITE			  Number 0070
BUFFER				  Number 0081
BUFFER_LENGTH			  Number 0080
CALCULATE_LEFT_UP_CORNER	  Near	 DGROUP:02A7
CENTER_X			  Number 0028
CENTER_Y			  Number 000D
CLASSIC_FILLING			  Struct DGROUP:001E RECT_FILLING
COUNT_AL_SYMBOLS_IN_STRING	  Near	 DGROUP:018E
DRAW_FRAME			  Near	 DGROUP:01F5
DRAW_FRAME_LINE			  Near	 DGROUP:01DD
DRAW_HORIZONTAL			  Near	 DGROUP:01DA
DREC_CLASSIC			  Struct DGROUP:000C RECT_STYLE
DREC_FILLING			  Struct DGROUP:0015 RECT_FILLING
FG_BLUE				  Number 0001
FG_BRIGHT			  Number 0008
FG_GREEN			  Number 0002
FG_RED				  Number 0004
FG_WHITE			  Number 000F
FILLING				  Struct DGROUP:0003 RECT_FILLING
Turbo Assembler	 Version 4.1	    02/15/26 02:50:06	    Page 15
Symbol Table



FILLINGS			  Near	 DGROUP:0015
FRAME_STYLE			  Struct DGROUP:0000 RECT_STYLE
GET_SIZE			  Near	 DGROUP:026B
GITHUB				  Struct DGROUP:0012 RECT_STYLE
MAIN				  Near	 DGROUP:0107
NEW_LINE_OFFSET			  Number 00A0
OLD_SCHOOL			  Struct DGROUP:000F RECT_STYLE
SEPARATOR			  Number 0023
SET_FILLING			  Near	 DGROUP:0126
SET_STYLE			  Near	 DGROUP:014C
SKIP_SPACES			  Near	 DGROUP:0172
STRLEN				  Near	 DGROUP:017A
STYLES				  Near	 DGROUP:000C
TRANSLATE_STRING		  Near	 DGROUP:029A
VRAM_LOCATION			  Number B800
WRITE_LINE			  Near	 DGROUP:0199
WRITE_STRING_CENTERED		  Near	 DGROUP:01A7
WRITE_TEXT_CENTERED		  Near	 DGROUP:01B3
__START__			  Near	 DGROUP:0100

Macro Name

__EXIT__

Structure Name			  Type	Offset

RECT_FILLING
 FILLING_UL			  Byte	 0000
 FILLING_U			  Byte	 0001
 FILLING_UR			  Byte	 0002
 FILLING_ML			  Byte	 0003
 FILLING_M			  Byte	 0004
 FILLING_MR			  Byte	 0005
 FILLING_DL			  Byte	 0006
 FILLING_D			  Byte	 0007
 FILLING_DR			  Byte	 0008
RECT_STYLE
 GLOBAL_FILLING			  Byte	 0000
 GLOBAL_STYLE			  Byte	 0001
 GLOBAL_ATRIBUTE		  Byte	 0002

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0027 Word	  Public  DATA
  _TEXT				  16  02D0 Word	  Public  CODE
